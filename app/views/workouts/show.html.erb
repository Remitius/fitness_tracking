<% provide(:title, @workout.name.first(13)) %> 
<header class="page-header">
  <%= render 'layouts/header_content' %> 
</header>

<% if @workout %>
  <ul class='workout_info'>
    <li>Name: <%= @workout.name %></li>
    <li>Date: <%= @workout.date %></li>
    <li>Note: <%= @workout.note %></li>
  </ul>

  <%= render 'workout_form' %>
  <%= link_to "delete workout", @workout, method: :delete, 
                                  data: { confirm: "Are you sure?" }%> 
  <%= render 'exercises/exercise_form' %>
<% end %> 

<section>
  <% if (@workout.exercises).any? %>
      <% @workout.exercises.each do |exer| %>
        <% next unless exer.id %> 
        <h4 class='exercise_name'>
          <%= "#{h exer.name}".html_safe %>
          <%= link_to "edit", edit_workout_exercise_path(@workout, exer) %> 
          <%= link_to "delete", [@workout, exer], method: :delete, 
                                   data: { confirm: "Are you sure?"} %> 
        </h4>

        <% if exer.note.present? || exer.e_sets.present? %> 
          <ul class='exercise_note_and_sets'>
            <% unless exer.note.blank? %> 
              <li><%= "Note: #{h exer.note}".html_safe%></li>
            <% end %> 

            <% exer.e_sets.each do |set| %> 
              <li>
                <% if set.pounds %> 
                  <%= "#{h set.pounds}".html_safe + " pounds"%> 
                <% end %> 

                <% if set.reps %> 
                  <%= "#{h set.reps}".html_safe + " reps"%> 
                <% end %> 

                <%= link_to "delete set", [@workout, exer, set], method: :delete %> 
              </li>
            <% end %> 
          </ul>
        <% end %> 

      <% end %>
  <% else %> 
    No exercises present
  <% end %> 
</section> 